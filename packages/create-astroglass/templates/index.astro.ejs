---
<%# index.astro — generated by create-astroglass CLI %>
/**
 * Index Page — Main Entry Route
 *
<% if (themes.length === 1) { %>
 * Single-theme mode: renders the <%= themes[0].id %> theme directly at /.
<% } else { %>
 * Multi-theme mode: renders the demo landing page with theme showcase.
<% } %>
 */
import { getEnabledLocaleCodes, defaultLocale } from '../../config/locales';

export async function getStaticPaths() {
  return getEnabledLocaleCodes().map(lang => {
    return { params: { lang: lang === defaultLocale ? undefined : lang } };
  });
}

import BaseLayout from '../../layouts/BaseLayout.astro';
import { useTranslations } from '../../utils/i18n';
import { getLocaleFromUrl } from '../../utils/locale-utils';

<% if (themes.length === 1) { %>
<%   const theme = themes[0]; %>
<%   const ThemeName = theme.id.charAt(0).toUpperCase() + theme.id.slice(1); %>
import { getThemeById, getLandingSections } from '../../config/themes';
import * as ThemeSections from '../../components/sections/themes/<%= theme.id %>';

const locale = Astro.params.lang || 'en';
const t = useTranslations(locale);
const theme = getThemeById('<%= theme.id %>');
const landingSections = getLandingSections('<%= theme.id %>');

const Header = ThemeSections['Header'] as (_props: Record<string, unknown>) => unknown;
const Footer = ThemeSections['Footer'] as (_props: Record<string, unknown>) => unknown;

const mainSections = landingSections
  .map((key: string) => (ThemeSections as Record<string, unknown>)[key] ?? null)
  .filter((C): C is NonNullable<typeof C> => C !== null);
---

<BaseLayout
  title={t('title')}
  description={t('description')}
  showHeader={false}
  headerVersion={<%= theme.version %>}
>
  <Header />
  <main>
    {mainSections.map((Section: any) => <Section />)}
  </main>
  <Footer />
</BaseLayout>
<% } else { %>
import HeaderDefault from '../../components/layout/header/HeaderDefault.astro';
import FooterIndex from '../../components/sections/footer/FooterIndex.astro';

// Home page sections
import HeroHome from '../../components/sections/hero/HeroHome.astro';
import StatsStrip from '../../components/sections/landing/StatsStrip.astro';
import TemplateShowcase from '../../components/sections/landing/TemplateShowcase.astro';
import HowItWorks from '../../components/sections/landing/HowItWorks.astro';
import FeaturesHome from '../../components/sections/features/FeaturesHome.astro';
import ThemeGallery from '../../components/sections/portfolio/ThemeGallery.astro';
import TestimonialHome from '../../components/sections/testimonial/TestimonialHome.astro';
import FAQHome from '../../components/sections/landing/FAQHome.astro';
import CTAHome from '../../components/sections/cta/CTAHome.astro';

const locale = Astro.params.lang || 'en';
const t = useTranslations(locale);
---

<BaseLayout title={t('title')} description={t('description')} showHeader={false}>
  <HeaderDefault />
  
  <main class="min-h-screen">
    <HeroHome />
    <StatsStrip />
    <TemplateShowcase />
    <HowItWorks />
    <FeaturesHome />
    <ThemeGallery />
    <TestimonialHome />
    <FAQHome />
    <CTAHome />
  </main>
  
  <FooterIndex />
</BaseLayout>
<% } %>
