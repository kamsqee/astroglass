---
import { getEnabledLocaleCodes, defaultLocale } from '../../config/locales';

export async function getStaticPaths() {
  return getEnabledLocaleCodes().map(lang => ({
    params: { lang: lang === defaultLocale ? undefined : lang }
  }));
}

import BaseLayout from '../../layouts/BaseLayout.astro';
import FooterLiquid from '../../components/sections/footer/FooterLiquid.astro';
import ArticleProse from '../../components/blog/ArticleProse.astro';
import { useTranslations } from '../../utils/i18n';
import { getLocaleFromUrl } from '../../utils/locale-utils';

const locale = getLocaleFromUrl(Astro.url);
const t = useTranslations(locale);

const sections = [
  'intro',
  'collection',
  'usage',
  'sharing',
  'security',
  'cookies',
  'rights',
  'contact'
];
---

<BaseLayout title={t('privacy.title')} description={t('privacy.description')}>
  <main class="pt-32 pb-20 px-4 sm:px-6">
    <div class="max-w-4xl mx-auto">
      <div class="text-center mb-16">
        <h1 class="text-4xl md:text-6xl font-black text-base-content tracking-tight mb-6">
          {t('privacy.title')}
        </h1>
        <p class="text-lg text-base-content/60">
          {t('privacy.lastUpdated')}
        </p>
      </div>

      <ArticleProse>
        {sections.map((section) => (
          <div class="mb-12">
            {t(`privacy.sections.${section}.title`, { silent: true }) !== `privacy.sections.${section}.title` && (
              <h2>{t(`privacy.sections.${section}.title`)}</h2>
            )}
            <p>{t(`privacy.sections.${section}.content`)}</p>
          </div>
        ))}
      </ArticleProse>
    </div>
  </main>
  
  <FooterLiquid />
</BaseLayout>
