---
/**
 * Testimonial Minimal - The Infinite Marquee
 * Auto-scrolling horizontal ticker with dual rows.
 * Mobile: Single row ticker. Desktop: Dual counter-scrolling rows.
 */
import { useTranslations } from '../../../utils/i18n';
import { getLocaleFromUrl } from '../../../utils/locale-utils';

const locale = getLocaleFromUrl(Astro.url);
const t = useTranslations(locale);

import '../../../styles/components/testimonial/TestimonialMinimal.css';

const row1 = [
  { quote: t('testimonial.q5'), author: "Alex M.", company: "Stripe", avatar: "https://i.pravatar.cc/60?img=1" },
  { quote: t('testimonial.q6'), author: "Sarah K.", company: "Vercel", avatar: "https://i.pravatar.cc/60?img=5" },
  { quote: t('testimonial.q7'), author: "Mike R.", company: "Linear", avatar: "https://i.pravatar.cc/60?img=8" },
  { quote: t('testimonial.q14'), author: "Lisa T.", company: "Figma", avatar: "https://i.pravatar.cc/60?img=9" },
  { quote: t('testimonial.q8'), author: "David L.", company: "Notion", avatar: "https://i.pravatar.cc/60?img=11" },
  { quote: t('testimonial.q15'), author: "Emma W.", company: "Arc", avatar: "https://i.pravatar.cc/60?img=20" },
];

const row2 = [
  { quote: t('testimonial.q9'), author: "Chris P.", company: "Shopify", avatar: "https://i.pravatar.cc/60?img=12" },
  { quote: t('testimonial.q10'), author: "Nina S.", company: "GitHub", avatar: "https://i.pravatar.cc/60?img=23" },
  { quote: t('testimonial.q11'), author: "Tom B.", company: "Supabase", avatar: "https://i.pravatar.cc/60?img=33" },
  { quote: t('testimonial.q12'), author: "Kate M.", company: "Raycast", avatar: "https://i.pravatar.cc/60?img=44" },
  { quote: t('testimonial.q16'), author: "Jay H.", company: "Clerk", avatar: "https://i.pravatar.cc/60?img=52" },
  { quote: t('testimonial.q13'), author: "Amy L.", company: "Resend", avatar: "https://i.pravatar.cc/60?img=47" },
];
import '../../../styles/components/tag/TagMinimal.css';
---

<section class="relative py-24 lg:py-32 overflow-hidden bg-base-100">
  <!-- Header -->
  <div class="text-center mb-16 px-6">
     <span class="c-tag-minimal mb-4 block"><span class="c-tag-minimal__dash"></span>{t('testimonial.trustedBy')}</span>
     <h2 class="text-4xl md:text-6xl font-black text-base-content tracking-tighter">{t('testimonial.theCommunity')}</h2>
  </div>

  <!-- Marquee Container -->
  <div class="c-testimonial-minimal__container space-y-6">
     <!-- Row 1 - Left to Right -->
     <div class="c-testimonial-minimal__row">
        <div class="c-testimonial-minimal__track c-testimonial-minimal__track--left">
           {[...row1, ...row1].map((item, i) => (
              <div class="c-testimonial-minimal__card flex-shrink-0 w-[320px] p-5 rounded-2xl bg-base-content/[0.02] border border-base-content/5">
                 <p class="text-sm text-base-content/70 mb-4 line-clamp-2">"{item.quote}"</p>
                 <div class="flex items-center gap-3">
                    <img src={item.avatar} alt={item.author} class="w-8 h-8 rounded-full object-cover" />
                    <div>
                       <p class="text-xs font-bold text-base-content">{item.author}</p>
                       <p class="text-[10px] text-base-content">{item.company}</p>
                    </div>
                 </div>
              </div>
           ))}
        </div>
     </div>

     <!-- Row 2 - Right to Left (Desktop only) -->
     <div class="c-testimonial-minimal__row hidden lg:block">
        <div class="c-testimonial-minimal__track c-testimonial-minimal__track--right">
           {[...row2, ...row2].map((item, i) => (
              <div class="c-testimonial-minimal__card flex-shrink-0 w-[320px] p-5 rounded-2xl bg-base-content/[0.02] border border-base-content/5">
                 <p class="text-sm text-base-content/70 mb-4 line-clamp-2">"{item.quote}"</p>
                 <div class="flex items-center gap-3">
                    <img src={item.avatar} alt={item.author} class="w-8 h-8 rounded-full object-cover" />
                    <div>
                       <p class="text-xs font-bold text-base-content">{item.author}</p>
                       <p class="text-[10px] text-base-content">{item.company}</p>
                    </div>
                 </div>
              </div>
           ))}
        </div>
     </div>
  </div>

  <!-- Gradient Masks -->
  <div class="absolute inset-y-0 left-0 w-32 bg-gradient-to-r from-base-100 to-transparent pointer-events-none z-10"></div>
  <div class="absolute inset-y-0 right-0 w-32 bg-gradient-to-l from-base-100 to-transparent pointer-events-none z-10"></div>
</section>
