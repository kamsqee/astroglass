---
/**
 * Features Luxury - Use-Case Driven Tabs
 * Features organized by user intent with interactive tab switching.
 */
import '../../../styles/components/features/FeaturesLuxury.css';
import { useTranslations } from '../../../utils/i18n';
import { getLocaleFromUrl } from '../../../utils/locale-utils';
import LuxuryButton from '../../ui/luxury/LuxuryButton.astro';
import LuxuryCard from '../../ui/luxury/LuxuryCard.astro';
import LuxurySectionLabel from '../../ui/luxury/LuxurySectionLabel.astro';

const locale = getLocaleFromUrl(Astro.url);
const t = useTranslations(locale);

const useCases = [
  {
    id: 'speed',
    icon: 'âš¡',
    label: t('features.useCases.speed'),
    headline: t('features.useCases.speedHeadline'),
    features: [
      { icon: 'ğŸš€', title: t('features.f1Title'), desc: t('features.f1Desc') },
      { icon: 'ğŸ“¦', title: t('features.useCases.speedF2Title'), desc: t('features.useCases.speedF2Desc') },
    ]
  },
  {
    id: 'design',
    icon: 'âœ¨',
    label: t('features.useCases.design'),
    headline: t('features.useCases.designHeadline'),
    features: [
      { icon: 'ğŸ’', title: t('features.f2Title'), desc: t('features.f2Desc') },
      { icon: 'ğŸ¨', title: t('features.f4Title'), desc: t('features.f4Desc') },
    ]
  },
  {
    id: 'scale',
    icon: 'ğŸŒ',
    label: t('features.useCases.scale'),
    headline: t('features.useCases.scaleHeadline'),
    features: [
      { icon: 'ğŸ“±', title: t('features.f3Title'), desc: t('features.f3Desc') },
      { icon: 'ğŸŒ', title: t('features.useCases.scaleF2Title'), desc: t('features.useCases.scaleF2Desc') },
    ]
  },
];
---



<section id="services" class="features-luxury relative py-20 md:py-32 px-4 sm:px-6 lg:px-8 overflow-hidden">
  <div class="max-w-6xl mx-auto">
    <!-- Header -->
    <div class="text-center mb-10 sm:mb-14">
      <div class="mb-6 flex justify-center">
        <LuxurySectionLabel text={t('features.badge')} />
      </div>
      <h2 class="text-4xl sm:text-5xl md:text-6xl font-normal font-serif text-base-content tracking-tight mb-4">
        {t('features.luxuryTitle')}
      </h2>
      <p class="text-base sm:text-lg text-base-content/75 max-w-xl mx-auto">
        {t('features.luxurySubtitle')}
      </p>
    </div>

    <!-- Tab Bar -->
    <div class="tab-bar flex justify-center mb-10 sm:mb-14">
      <div class="inline-flex gap-2 p-1.5 rounded-2xl bg-base-content/[0.03] border border-base-content/5 overflow-x-auto max-w-full">
        {useCases.map((uc, i) => (
          <button
            type="button"
            class:list={[
              "tab-btn flex items-center gap-2 px-6 sm:px-8 py-3 rounded-full font-bold text-sm whitespace-nowrap transition-luxury",
              i === 0 ? "active bg-accent text-white shadow-lg shadow-accent/25" : "text-base-content/75 hover:text-base-content hover:bg-base-content/5"
            ]}
            data-tab={uc.id}
          >
            <span class="text-lg">{uc.icon}</span>
            <span class="hidden sm:inline">{uc.label}</span>
          </button>
        ))}
      </div>
    </div>

    <!-- Tab Content -->
    <div class="tab-content-container relative">
      {useCases.map((uc, i) => (
        <div 
          class:list={[
            "c-features-luxury__content",
            i === 0 ? "active" : ""
          ]}
          data-content={uc.id}
        >
          <!-- Headline -->
          <p class="text-center text-lg sm:text-xl text-base-content/75 font-medium mb-8 sm:mb-10 max-w-2xl mx-auto">
            {uc.headline}
          </p>

          <!-- Feature Cards -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6">
            {uc.features.map((f, fi) => (
              <a href={`/${locale}/docs`} class="block w-full h-full">
                <LuxuryCard class="group p-6 sm:p-8 h-full" spotlight={true}>
                  <div class="relative z-10 flex gap-5">
                    <div class="w-12 h-12 sm:w-14 sm:h-14 rounded-xl sm:rounded-2xl bg-accent/10 flex items-center justify-center text-2xl sm:text-3xl shrink-0 group-hover:scale-110 group-hover:rotate-3 transition-luxury">
                      {f.icon}
                    </div>
                    <div>
                      <h3 class="text-lg sm:text-xl font-black text-base-content mb-2 group-hover:text-accent transition-colors duration-luxury-fast">
                        {f.title}
                      </h3>
                      <p class="text-sm sm:text-base text-base-content/75 leading-relaxed group-hover:text-base-content/70 transition-colors duration-luxury-fast">
                        {f.desc}
                      </p>
                    </div>
                  </div>
                </LuxuryCard>
              </a>
            ))}
          </div>
        </div>
      ))}
    </div>

    <!-- CTA -->
    <div class="text-center mt-12 sm:mt-16">
      <LuxuryButton href={`/${locale}/docs`} variant="primary" icon={true}>
        {t('features.cta')}
      </LuxuryButton>
    </div>
  </div>
</section>

<script>
  import { Spotlight } from '../../../scripts/luxury-interactions';

  function initFeaturesLuxury() {
    const container = document.querySelector('.features-luxury');
    if (!container) return;
    
    // Init Spotlight
    new Spotlight('.features-luxury .js-spotlight');

    const tabs = container.querySelectorAll('.tab-btn');
    const contents = container.querySelectorAll('.c-features-luxury__content');

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        const targetId = tab.getAttribute('data-tab');

        // Update tabs
        tabs.forEach(t => {
          t.classList.remove('active', 'bg-accent', 'text-white', 'shadow-lg', 'shadow-accent/25');
          t.classList.add('text-base-content/75');
        });
        tab.classList.add('active', 'bg-accent', 'text-white', 'shadow-lg', 'shadow-accent/25');
        tab.classList.remove('text-base-content/75');

        // Update content
        contents.forEach(c => {
          c.classList.remove('active');
          if (c.getAttribute('data-content') === targetId) {
            c.classList.add('active');
          }
        });
      });
    });
  }

  // Initialize
  initFeaturesLuxury();

  // Re-init on Astro navigation
  document.addEventListener('astro:after-swap', initFeaturesLuxury);
</script>
