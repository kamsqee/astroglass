---
/**
 * About Aurora - Aurora Dashboard Peek
 * Split layout: text content left, dashboard-style visualization right.
 * Features counting-up stats and a mock analytics panel.
 */
import { getLocaleFromUrl, useTranslations } from '../../../utils/i18n';

const locale = getLocaleFromUrl(Astro.url);
const t = useTranslations(locale);
import '../../../styles/components/about/AboutAurora.css';
---

<section class="about-aurora" id="about">
  <div class="about-aurora-inner">
    <!-- Left: Text Content -->
    <div class="about-aurora-content">
      <span class="about-aurora-terminal-label">// {t('about.ourMission')}</span>

      <h2 class="about-aurora-title">{t('about.title')}</h2>

      <p class="about-aurora-desc">
        {t('about.description')}
      </p>

      <!-- Stats row -->
      <div class="about-aurora-stats">
        <div class="about-aurora-stat">
          <span class="about-aurora-stat-value" data-aurora-count="100">100</span>
          <span class="about-aurora-stat-label">{t('about.stat1')}</span>
          <span class="about-aurora-stat-sub">{t('about.stat1Sub')}</span>
        </div>
        <div class="about-aurora-stat">
          <span class="about-aurora-stat-value">10+</span>
          <span class="about-aurora-stat-label">{t('about.stat2')}</span>
          <span class="about-aurora-stat-sub">{t('about.stat2Sub')}</span>
        </div>
        <div class="about-aurora-stat">
          <span class="about-aurora-stat-value">i18n</span>
          <span class="about-aurora-stat-label">{t('about.stat3')}</span>
          <span class="about-aurora-stat-sub">{t('about.stat3Sub')}</span>
        </div>
      </div>

      <a href="#features" class="about-aurora-cta">
        {t('about.learnMore')}
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M5 12h14M12 5l7 7-7 7"/>
        </svg>
      </a>
    </div>

    <!-- Right: Dashboard Visualization -->
    <div class="about-aurora-dashboard">
      <div class="about-aurora-dash-card">
        <!-- Scan line -->
        <div class="about-aurora-scanline"></div>

        <!-- Dashboard grid background -->
        <div class="about-aurora-dash-grid"></div>

        <!-- Top bar -->
        <div class="about-aurora-dash-header">
          <div class="about-aurora-dash-dots">
            <span></span><span></span><span></span>
          </div>
          <span class="about-aurora-dash-title">{t('about.byTheNumbers')}</span>
        </div>

        <!-- Sparkline -->
        <div class="about-aurora-sparkline">
          <svg viewBox="0 0 300 80" preserveAspectRatio="none" class="about-aurora-sparkline-svg">
            <defs>
              <linearGradient id="aurora-spark-grad" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" class="about-aurora-grad-start"/>
                <stop offset="100%" class="about-aurora-grad-end"/>
              </linearGradient>
            </defs>
            <path 
              d="M0,60 C30,55 50,40 80,35 C110,30 130,50 160,25 C190,0 210,15 240,10 C270,5 290,20 300,8" 
              fill="none" 
              class="about-aurora-sparkline-path"
              stroke-width="2"
            />
            <path 
              d="M0,60 C30,55 50,40 80,35 C110,30 130,50 160,25 C190,0 210,15 240,10 C270,5 290,20 300,8 L300,80 L0,80 Z" 
              fill="url(#aurora-spark-grad)" 
              opacity="0.15"
            />
          </svg>
          <div class="about-aurora-sparkline-label">
            <span class="about-aurora-sparkline-up">â†‘ 47%</span>
            <span>{t('about.feature1Title')}</span>
          </div>
        </div>

        <!-- Mini stats row -->
        <div class="about-aurora-dash-metrics">
          <div class="about-aurora-metric">
            <div class="about-aurora-metric-ring">
              <svg viewBox="0 0 36 36">
                <path
                  d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                  fill="none"
                  class="about-aurora-ring-bg"
                  stroke-width="3"
                />
                <path
                  d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                  fill="none"
                  class="about-aurora-ring-fill"
                  stroke-width="3"
                  stroke-dasharray="100, 100"
                />
              </svg>
              <span class="about-aurora-ring-value">100</span>
            </div>
            <span class="about-aurora-metric-label">{t('about.feature1Title')}</span>
          </div>
          <div class="about-aurora-metric">
            <div class="about-aurora-metric-bar">
              <div class="about-aurora-bar-track">
                <div class="about-aurora-bar-fill" style="--bar-width: 92%"></div>
              </div>
              <span class="about-aurora-bar-value">92%</span>
            </div>
            <span class="about-aurora-metric-label">{t('about.feature2Title')}</span>
          </div>
          <div class="about-aurora-metric">
            <div class="about-aurora-metric-bar">
              <div class="about-aurora-bar-track">
                <div class="about-aurora-bar-fill" style="--bar-width: 88%"></div>
              </div>
              <span class="about-aurora-bar-value">88%</span>
            </div>
            <span class="about-aurora-metric-label">{t('about.feature3Title')}</span>
          </div>
        </div>

        <!-- Status pills -->
        <div class="about-aurora-dash-pills">
          <span class="about-aurora-pill about-aurora-pill--active">
            <span class="about-aurora-pill-dot"></span>
            {t('about.stat1')}
          </span>
          <span class="about-aurora-pill">
            {t('about.stat2')}
          </span>
          <span class="about-aurora-pill">
            {t('about.stat3')}
          </span>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  function initAboutAurora() {
    const card = document.querySelector('.about-aurora-dash-card');
    if (!card) return;

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          card.classList.add('is-visible');
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.3 });

    observer.observe(card);
  }

  initAboutAurora();
  document.addEventListener('astro:after-swap', initAboutAurora);
</script>
