---
/**
 * Logo Component
 * 
 * Reusable logo with icon and optional text.
 * Can be customized via props for different header variants.
 */
import { getLocaleFromUrl, useTranslations } from '../../utils/i18n';

export interface Props {
  /** Additional CSS classes */
  class?: string;
  /** Whether to show the text label (hidden on small screens by default) */
  showText?: boolean;
  /** Custom href override (defaults to locale home) */
  href?: string;
  /** Size variant */
  size?: 'sm' | 'md' | 'lg';
}

const { 
  class: className = '',
  showText = true,
  href: customHref,
  size = 'md',
} = Astro.props;

const locale = getLocaleFromUrl(Astro.url);
const t = useTranslations(locale);

// Use custom href if provided, otherwise route to locale-aware homepage
const defaultHome = locale === 'en' ? '/' : `/${locale}/`;
const href = customHref ?? defaultHome;

// Size configurations
const sizes = {
  sm: {
    icon: 'w-8 h-8',
    iconInner: 'w-4 h-4',
    text: 'text-lg',
    rounded: 'rounded-xl',
  },
  md: {
    icon: 'w-10 h-10',
    iconInner: 'w-5 h-5',
    text: 'text-xl',
    rounded: 'rounded-2xl',
  },
  lg: {
    icon: 'w-12 h-12',
    iconInner: 'w-6 h-6',
    text: 'text-2xl',
    rounded: 'rounded-2xl',
  },
};

const sizeConfig = sizes[size];
---

<a 
  href={href} 
  aria-label={t('siteName')}
  class:list={[
    'logo-link group flex items-center gap-3 text-base-content font-bold',
    sizeConfig.text,
    className,
  ]}
>
  <span 
    class:list={[
      'logo-icon flex items-center justify-center bg-gradient-to-br from-accent via-accent to-accent/80 text-white shadow-lg shadow-accent/30',
      sizeConfig.icon,
      sizeConfig.rounded,
    ]}
  >
    <svg class={sizeConfig.iconInner} viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M12 2.5C12 2.5 4 10 4 14.5C4 18.92 7.58 22.5 12 22.5C16.42 22.5 20 18.92 20 14.5C20 10 12 2.5 12 2.5Z"/>
      <path d="M8.5 14L12 8L15.5 14L12 18Z"/>
    </svg>
  </span>
  {showText && (
    <span class="logo-text hidden sm:block">{t('siteName')}</span>
  )}
</a>

