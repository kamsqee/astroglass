---
/**
 * Pricing Minimal - Feature Bento
 * Desktop: Modular grid. Mobile: Stats-focused single card with expandable features.
 */
import { useTranslations } from '../../../utils/i18n';
import { getLocaleFromUrl } from '../../../utils/locale-utils';

const locale = getLocaleFromUrl(Astro.url);
const t = useTranslations(locale);

import '../../../styles/components/pricing/PricingMinimal.css';
import '../../../styles/components/tag/TagMinimal.css';

import { Button } from '../../ui/button';
import { Card } from '../../ui/card';

const features = [
  { icon: 'üöÄ', title: t('pricing.features.priorityPerformance'), desc: t('pricing.features.priorityPerformanceDesc') },
  { icon: 'üõ°Ô∏è', title: t('pricing.features.securityPlus'), desc: t('pricing.features.securityPlusDesc') },
  { icon: '‚ö°', title: t('pricing.features.apiAccess'), desc: t('pricing.features.apiAccessDesc') },
];

const stats = [
  { value: '99.9%', label: t('pricing.features.uptimeSla') },
  { value: '24/7', label: t('pricing.features.support') },
  { value: '<50ms', label: t('pricing.features.latency') },
];
---

<section id="pricing" class="relative py-32 px-6 overflow-hidden">
  <div class="max-w-7xl mx-auto">
    
    <!-- Desktop: Bento Grid -->
    <div class="hidden lg:grid grid-cols-12 gap-8 auto-rows-fr">
      
      <!-- Main Pricing Card -->
      <Card variant="bento-highlight" className="c-pricing-minimal__card lg:col-span-4 lg:row-span-2 p-12 md:p-16 rounded-[4rem] flex flex-col justify-between group/main">
         <div class="absolute inset-0 bg-gradient-to-br from-accent/20 to-transparent transition-opacity duration-1200 group-hover/main:opacity-100 opacity-60 pointer-events-none"></div>
         
         <div class="relative z-10">
            <div class="flex items-center gap-3 mb-10 group-hover/main:translate-x-1">
               <span class="c-pricing-minimal__pulse w-2 h-2 rounded-full bg-accent animate-pulse shadow-[0_0_10px_hsl(var(--a))]"></span>
               <span class="c-tag-minimal"><span class="c-tag-minimal__dash"></span>{t('pricing.activeSystem')}</span>
            </div>
            <h3 class="text-6xl md:text-[6.5rem] font-black text-base-content mb-6 tracking-tighter group-hover/main:scale-105 origin-left">{t('pricing.tier2Name')}</h3>
            <p class="text-xl text-base-content/75 font-medium mb-12 leading-relaxed group-hover/main:text-base-content/75">{t('pricing.plans.pro.desc')}</p>
         </div>

         <div class="relative z-10">
            <div class="text-7xl font-black text-base-content mb-10 tracking-tighter">$49<span class="text-xl opacity-20 font-bold uppercase tracking-widest ml-4 italic">{t('pricing.perMonth')}</span></div>
            <button class="w-full py-6 rounded-2xl bg-base-content text-base-100 font-black tracking-[0.3em] text-[11px] uppercase hover:scale-105 active:scale-95 shadow-xl relative overflow-hidden group/btn">
               <span class="relative z-10">{t('pricing.cta')}</span>
               <div class="c-pricing-minimal__btn-bg absolute inset-0 bg-accent -translate-x-full group-hover/btn:translate-x-0"></div>
            </button>
         </div>
      </Card>

      <!-- Feature Bento Pieces -->
      <Card variant="bento" className="c-pricing-minimal__bento lg:col-span-5 p-10 md:p-14 rounded-[3.5rem] group/b1">
         <div class="c-pricing-minimal__icon w-14 h-14 rounded-2xl bg-base-content/5 border border-base-content/5 flex items-center justify-center text-3xl mb-10 group-hover/b1:scale-125 group-hover/b1:rotate-6 group-hover/b1:bg-accent group-hover/b1:text-base-100 group-hover/b1:shadow-[0_0_30px_hsl(var(--a)/0.3)]">üöÄ</div>
         <h4 class="text-2xl font-black text-base-content mb-4 tracking-tight group-hover/b1:text-accent transition-colors duration-1200">{features[0].title}</h4>
         <p class="text-lg text-base-content/75 leading-relaxed font-medium group-hover/b1:text-base-content/75 transition-colors duration-1200">{features[0].desc}</p>
      </Card>

      <div class="c-pricing-minimal__bento lg:col-span-3 p-10 md:p-14 rounded-[3.5rem] bg-accent/5 border border-accent/10 backdrop-blur-2xl hover:bg-accent/10 flex flex-col justify-center text-center group/b2">
         <div class="text-5xl lg:text-7xl font-black text-base-content mb-3 tracking-tighter group-hover/b2:scale-110">{stats[0].value}</div>
         <div class="text-[11px] font-black uppercase tracking-[0.4em] text-base-content/80 group-hover/b2:tracking-[0.6em]">{stats[0].label}</div>
      </div>

      <Card variant="bento" className="c-pricing-minimal__bento lg:col-span-3 p-10 md:p-14 rounded-[3.5rem] group/b3">
         <div class="c-pricing-minimal__icon w-14 h-14 rounded-2xl bg-base-content/5 border border-base-content/5 flex items-center justify-center text-3xl mb-10 group-hover/b3:scale-125 group-hover/b3:rotate-6 group-hover/b3:bg-accent group-hover/b3:text-base-100 group-hover/b3:shadow-[0_0_30px_hsl(var(--a)/0.3)]">üõ°Ô∏è</div>
         <h4 class="text-2xl font-black text-base-content mb-4 tracking-tight group-hover/b3:text-accent transition-colors duration-1200">{features[1].title}</h4>
         <p class="text-base text-base-content/75 leading-relaxed font-medium group-hover/b3:text-base-content/75 transition-colors duration-1200">{features[1].desc}</p>
      </Card>

      <Card variant="bento" className="c-pricing-minimal__bento lg:col-span-5 p-10 md:p-14 rounded-[3.5rem] flex items-center justify-between gap-8 group/b4">
         <div>
            <h4 class="text-2xl font-black text-base-content mb-2 tracking-tight group-hover/b4:text-accent transition-colors duration-1200">{features[2].title}</h4>
            <p class="text-base text-base-content/75 font-medium leading-relaxed max-w-xs group-hover/b4:text-base-content/75 transition-colors duration-1200">{features[2].desc}</p>
         </div>
         <div class="px-8 py-4 rounded-full bg-base-content/5 text-base-content font-black text-[10px] tracking-[0.3em] uppercase group-hover/b4:bg-accent group-hover/b4:text-base-100 transition-all duration-1200">{t('faq.yes')}</div>
      </Card>

    </div>

    <!-- Mobile: Stats Hero + Feature List -->
    <div class="lg:hidden">
       <!-- Pricing Hero -->
       <div class="text-center mb-10">
          <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-accent/10 border border-accent/20 mb-6">
             <span class="w-2 h-2 rounded-full bg-accent animate-pulse"></span>
             <span class="text-[10px] font-black uppercase tracking-[0.3em] text-accent">{t('pricing.tier2Name')} Plan</span>
          </div>
          <div class="flex items-baseline justify-center gap-2 mb-3">
             <span class="text-base-content/20 text-3xl font-black">$</span>
             <span class="text-7xl font-black text-base-content tracking-tighter">49</span>
             <span class="text-base-content/80 font-bold">/mo</span>
          </div>
          <p class="text-base text-base-content/75 font-medium max-w-xs mx-auto">{t('pricing.plans.pro.desc')}</p>
       </div>

       <!-- Stats Row -->
       <div class="grid grid-cols-3 gap-3 mb-8">
          {stats.map(s => (
             <div class="p-4 rounded-2xl bg-accent/5 border border-accent/10 text-center">
                <div class="text-2xl font-black text-base-content tracking-tight">{s.value}</div>
                <div class="text-[9px] font-bold uppercase tracking-wider text-base-content/80">{s.label}</div>
             </div>
          ))}
       </div>

       <!-- Feature Cards -->
       <div class="space-y-4 mb-8">
          {features.map(f => (
             <div class="flex items-start gap-4 p-5 rounded-2xl bg-base-content/[0.02] border border-base-content/5">
                <div class="w-12 h-12 rounded-xl bg-base-content/5 flex items-center justify-center text-2xl flex-shrink-0">
                   {f.icon}
                </div>
                <div>
                   <h4 class="text-sm font-black text-base-content mb-1">{f.title}</h4>
                   <p class="text-xs text-base-content/75 leading-relaxed">{f.desc}</p>
                </div>
             </div>
          ))}
       </div>

       <!-- CTA -->
       <button class="w-full py-5 rounded-2xl bg-accent text-base-100 font-black text-xs uppercase tracking-[0.3em] shadow-xl">
          {t('pricing.cta')}
       </button>
    </div>
  </div>
</section>
