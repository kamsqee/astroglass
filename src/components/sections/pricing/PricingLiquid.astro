---
/**
 * Pricing Liquid - The Comparison Table
 * A clean, professional horizontal comparison layout with sticky headers.
 * Perfect for users who want to compare features at a glance.
 */
import { useTranslations } from '../../../utils/i18n';
import { getLocaleFromUrl } from '../../../utils/locale-utils';
import '../../../styles/components/pricing/PricingLiquid.css';
import LiquidSectionTag from '../../ui/liquid/LiquidSectionTag.astro';

const locale = getLocaleFromUrl(Astro.url);
const t = useTranslations(locale);

const features = [
  { name: t('pricing.features.projects'), starter: '1', pro: t('pricing.values.unlimited'), enterprise: t('pricing.values.unlimited') },
  { name: t('pricing.features.teamMembers'), starter: '1', pro: '5', enterprise: t('pricing.values.unlimited') },
  { name: t('pricing.features.storage'), starter: '1 GB', pro: '50 GB', enterprise: '500 GB' },
  { name: t('pricing.features.support'), starter: t('pricing.values.community'), pro: t('pricing.values.priorityEmail'), enterprise: t('pricing.values.phone247') },
  { name: t('pricing.features.customThemes'), starter: '—', pro: '✓', enterprise: '✓' },
  { name: t('pricing.features.apiAccess'), starter: '—', pro: '✓', enterprise: '✓' },
  { name: t('pricing.features.analytics'), starter: t('pricing.values.basic'), pro: t('pricing.values.advanced'), enterprise: 'Enterprise' },
  { name: t('pricing.features.whiteLabel'), starter: '—', pro: '—', enterprise: '✓' },
];

const tiers = [
  { id: 'starter', name: t('pricing.tier1Name'), price: '0', period: t('pricing.freeForever') },
  { id: 'pro', name: t('pricing.tier2Name'), price: '49', period: t('pricing.perMonth'), popular: true },
  { id: 'enterprise', name: t('pricing.tier3Name'), price: '199', period: t('pricing.perMonth') },
];
---



<section id="pricing" class="relative py-32 px-6 overflow-hidden bg-base-100">
  <div class="max-w-6xl mx-auto">
    <!-- Header -->
    <div class="text-center mb-20">
       <LiquidSectionTag label={t('pricing.comparePlans')} class="mb-6" />
       <h2 class="text-5xl md:text-7xl font-black text-base-content tracking-tighter leading-none mb-6">{t('pricing.title')}</h2>
       <p class="text-lg text-base-content/75 font-medium max-w-xl mx-auto">{t('pricing.subtitle')}</p>
    </div>

    <!-- Desktop: Table Layout -->
    <div class="hidden lg:block">
       <div class="c-pricing-liquid__table rounded-[3rem] border border-base-content/10 overflow-hidden bg-base-content/[0.02] backdrop-blur-xl">
          <!-- Tier Headers -->
          <div class="grid grid-cols-4 border-b border-base-content/10">
             <div class="p-8 flex items-end">
                <span class="text-xs font-black uppercase tracking-[0.3em] text-base-content/80">{t('pricing.featuresTitle')}</span>
             </div>
             {tiers.map((tier) => (
                <div class:list={[
                   "c-pricing-liquid__header p-8 text-center border-l border-base-content/5 relative",
                   tier.popular ? "c-pricing-liquid__header--popular c-pricing-liquid__col--popular bg-accent/5" : ""
                ]}>
                   {tier.popular && (
                      <div class="absolute -top-px left-1/2 -translate-x-1/2 px-6 py-2 bg-accent text-base-100 text-[8px] font-black uppercase tracking-[0.3em] rounded-b-xl shadow-lg">
                         {t('pricing.popular')}
                      </div>
                   )}
                   <h3 class="text-[10px] font-black uppercase tracking-[0.4em] text-accent mb-4 pt-4">{tier.name}</h3>
                   <div class="flex items-baseline justify-center gap-1 mb-2">
                      <span class="text-base-content/20 text-xl font-black">$</span>
                      <span class="text-5xl font-black text-base-content tracking-tighter">{tier.price}</span>
                   </div>
                   <p class="text-xs text-base-content/80 font-medium">{tier.period}</p>
                </div>
             ))}
          </div>

          <!-- Feature Rows -->
          {features.map((f, i) => (
             <div class:list={[
                "c-pricing-liquid__row grid grid-cols-4 border-b border-base-content/5 last:border-b-0",
                i % 2 === 0 ? "bg-transparent" : "bg-base-content/[0.01]"
             ]}>
                <div class="p-6 flex items-center">
                   <span class="text-sm font-bold text-base-content/75">{f.name}</span>
                </div>
                <div class="p-6 flex items-center justify-center border-l border-base-content/5">
                   <span class:list={["text-sm font-bold", f.starter === '—' ? "text-base-content/20" : "text-base-content/75"]}>
                      {f.starter}
                   </span>
                </div>
                <div class="p-6 flex items-center justify-center border-l border-base-content/5 bg-accent/[0.02]">
                   <span class:list={["text-sm font-bold", f.pro === '✓' ? "text-accent" : "text-base-content/75"]}>
                      {f.pro}
                   </span>
                </div>
                <div class="p-6 flex items-center justify-center border-l border-base-content/5">
                   <span class:list={["text-sm font-bold", f.enterprise === '✓' ? "text-accent" : "text-base-content/75"]}>
                      {f.enterprise}
                   </span>
                </div>
             </div>
          ))}

          <!-- CTA Row -->
          <div class="grid grid-cols-4 border-t border-base-content/10 bg-base-content/[0.02]">
             <div class="p-8"></div>
             {tiers.map((tier) => (
                <div class="p-8 flex items-center justify-center border-l border-base-content/5">
                   <button class:list={[
                      "c-pricing-liquid__cta px-10 py-4 font-black text-[10px] uppercase tracking-[0.3em] shadow-lg",
                      tier.popular ? "c-pricing-liquid__cta--popular bg-accent text-base-100 shadow-accent/30" : "bg-base-content/5 text-base-content hover:bg-base-content hover:text-base-100"
                   ]}>
                      {t('pricing.cta')}
                   </button>
                </div>
             ))}
          </div>
       </div>
    </div>

    <!-- Mobile: Clean Vertical Cards -->
    <div class="lg:hidden space-y-6">
       {tiers.map((tier) => (
          <div class:list={[
             "c-pricing-liquid__mobile-card relative p-6 rounded-[2rem] border backdrop-blur-xl",
             tier.popular ? "c-pricing-liquid__mobile-card--popular bg-accent/5 border-accent/30" : "bg-base-content/[0.02] border-base-content/10"
          ]}>
             <!-- Header row -->
             <div class="flex items-center justify-between mb-6">
                <div>
                   <h3 class="text-lg font-black text-base-content">{tier.name}</h3>
                   <p class="text-xs text-base-content/75">{tier.period}</p>
                </div>
                <div class="text-right">
                   <div class="flex items-baseline gap-0.5">
                      <span class="text-base-content/80 text-lg font-bold">$</span>
                      <span class="text-3xl font-black text-base-content">{tier.price}</span>
                   </div>
                   {tier.popular && <span class="text-[9px] font-bold text-accent uppercase tracking-wider">{t('pricing.popular')}</span>}
                </div>
             </div>

             <!-- Compact feature grid -->
             <div class="grid grid-cols-2 gap-x-4 gap-y-2 mb-6 pb-6 border-b border-base-content/5">
                {features.slice(0, 6).map(f => (
                   <div class="flex items-center justify-between text-sm py-1">
                      <span class="text-base-content/75 text-xs">{f.name}</span>
                      <span class:list={[
                         "text-xs font-bold",
                         tier.id === 'starter' && f.starter === '—' ? "text-base-content/20" :
                         tier.id === 'starter' ? "text-base-content/75" :
                         tier.id === 'pro' && f.pro === '✓' ? "text-accent" :
                         tier.id === 'pro' ? "text-base-content/75" :
                         f.enterprise === '✓' ? "text-accent" : "text-base-content/75"
                      ]}>
                         {tier.id === 'starter' ? f.starter : tier.id === 'pro' ? f.pro : f.enterprise}
                      </span>
                   </div>
                ))}
             </div>

             <button class:list={[
                "w-full py-3.5 rounded-xl font-black text-[10px] uppercase tracking-[0.2em]",
                tier.popular ? "bg-accent text-base-100" : "bg-base-content/5 text-base-content"
             ]}>
                {t('pricing.cta')}
             </button>
          </div>
       ))}
    </div>
  </div>
</section>
